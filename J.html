<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teka-Teki - Quiz Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
            position: relative;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .back-btn svg {
            width: 20px;
            height: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 20px;
        }

        .header h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .attempts-info {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            color: white;
            font-weight: bold;
        }

        .cooldown-message {
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .cooldown-timer {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .question-text {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            padding: 15px 20px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .option-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option-btn.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .result-container {
            text-align: center;
        }

        .result-container h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 32px;
        }

        .score {
            font-size: 48px;
            font-weight: bold;
            color: #764ba2;
            margin: 20px 0;
        }

        .gacha-container {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-radius: 15px;
        }

        .gacha-title {
            color: white;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .prize {
            background: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            color: #19547b;
            animation: prize-reveal 0.5s ease;
        }

        @keyframes prize-reveal {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .restart-btn {
            margin-top: 20px;
            padding: 15px 40px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .restart-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .hidden {
            display: none;
        }

        .input-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .date-input {
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
        }

        .submit-btn {
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: #764ba2;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="http://agusoffc.publicserver.my.id:3003/login" class="back-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Kembali
        </a>
        
        <div class="header">
            <h1>Games</h1>
            <p>Quiz Games</p>
        </div>

        <div class="attempts-info" id="attemptsInfo">
            <div>Percobaan Tersisa: <span id="attemptsLeft">3</span>/3</div>
        </div>

        <div id="cooldownContainer" class="cooldown-message hidden">
            <h2>‚è∞ Waktu Habis!</h2>
            <p>Kamu sudah bermain 3x hari ini</p>
            <div class="cooldown-timer" id="cooldownTimer">--:--:--</div>
            <p>Tunggu hingga cooldown selesai untuk bermain lagi</p>
        </div>

        <div id="gameContent">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div id="quizContainer" class="question-container">
                <div class="question-number" id="questionNumber"></div>
                <div class="question-text" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div id="resultContainer" class="result-container hidden">
                <h2>üéâ Quiz Selesai!</h2>
                <div class="score" id="finalScore"></div>
                <p id="scoreMessage"></p>
                
                <div class="gacha-container">
                    <div class="gacha-title">üéÅ HADIAH GACHA KAMU:</div>
                    <div class="prize" id="prizeDisplay"></div>
                </div>

                <button class="restart-btn" id="restartBtn" onclick="restartQuiz()">Main Lagi</button>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            {
                question: "Siapa Dev APK SamsInfinity?",
                options: ["Rafzz Off", "Samu Tampan"],
                correct: 1
            },
            {
                question: "Apa fungsi dari function dalam JavaScript?",
                options: ["Mendeklarasikan variabel", "Membuat blok kode yang dapat digunakan kembali", "Menghapus elemen", "Membuat array"],
                correct: 1
            },
            {
                question: "Apa kepanjangan dari HTML?",
                options: ["Hyper Text Markup Language", "High Tech Modern Language", "Home Tool Markup Language", "Hyperlinks and Text Markup Language"],
                correct: 0
            },
            {
                question: "Bahasa pemrograman mana yang digunakan untuk styling website?",
                options: ["JavaScript", "Python", "CSS", "Java"],
                correct: 2
            },
            {
                question: "Apa fungsi dari git commit?",
                options: ["Menghapus file", "Menyimpan perubahan ke repository", "Membuat branch baru", "Menjalankan kode"],
                correct: 1
            },
            {
                question: "Apa output dari: console.log(typeof [])?",
                options: ["array", "object", "list", "undefined"],
                correct: 1
            },
            {
                question: "Method mana yang digunakan untuk menambah elemen di akhir array?",
                options: ["push()", "pop()", "shift()", "unshift()"],
                correct: 0
            },
            {
                question: "Apa perbedaan antara == dan === di JavaScript?",
                options: ["Tidak ada perbedaan", "=== lebih cepat", "=== membandingkan nilai dan tipe data", "== lebih akurat"],
                correct: 2
            },
            {
                question: "Apa kepanjangan dari API?",
                options: ["Application Programming Interface", "Advanced Programming Interface", "Application Process Integration", "Automated Programming Interface"],
                correct: 0
            },
            {
                question: "Apa fungsi dari CSS Grid?",
                options: ["Membuat animasi", "Membuat layout dua dimensi", "Menghapus elemen", "Membuat database"],
                correct: 1
            },
            {
                question: "Method JavaScript untuk mengubah string menjadi huruf besar semua?",
                options: ["toUpper()", "toUpperCase()", "upperCase()", "capitalize()"],
                correct: 1
            },
            {
                question: "Apa fungsi dari npm?",
                options: ["Node Package Manager", "New Programming Method", "Network Protocol Manager", "Node Processing Module"],
                correct: 0
            },
            {
                question: "Apa yang dimaksud dengan responsive design?",
                options: ["Design yang cepat", "Design yang adaptif di berbagai ukuran layar", "Design dengan banyak warna", "Design yang simpel"],
                correct: 1
            },
            {
                question: "Apa fungsi dari async/await di JavaScript?",
                options: ["Membuat loop", "Menangani operasi asynchronous", "Membuat variabel", "Menghapus data"],
                correct: 1
            },
            {
                question: "Apa kepanjangan dari JSON?",
                options: ["JavaScript Object Notation", "Java Standard Object Notation", "JavaScript Online Network", "Java Syntax Object Name"],
                correct: 0
            },
            {
                question: "Framework JavaScript untuk membuat UI adalah?",
                options: ["Django", "Laravel", "React", "Flask"],
                correct: 2
            },
            {
                question: "Apa fungsi dari flexbox di CSS?",
                options: ["Membuat animasi", "Membuat layout fleksibel", "Membuat database", "Menghapus elemen"],
                correct: 1
            },
            {
                question: "Method untuk menambah elemen di awal array?",
                options: ["push()", "pop()", "shift()", "unshift()"],
                correct: 3
            },
            {
                question: "Apa yang dimaksud dengan DOM?",
                options: ["Document Object Model", "Data Object Management", "Digital Online Method", "Dynamic Output Module"],
                correct: 0
            },
            {
                question: "Apa fungsi dari try-catch?",
                options: ["Membuat loop", "Menangani error", "Membuat variabel", "Menghapus data"],
                correct: 1
            },
            {
                question: "Selector CSS untuk memilih semua elemen dengan class 'test'?",
                options: ["#test", ".test", "test", "*test"],
                correct: 1
            },
            {
                question: "Apa kepanjangan dari SQL?",
                options: ["Structured Query Language", "Simple Query Language", "System Query Language", "Standard Question Language"],
                correct: 0
            },
            {
                question: "HTTP status code untuk 'Not Found'?",
                options: ["200", "404", "500", "301"],
                correct: 1
            },
            {
                question: "Apa fungsi dari useState di React?",
                options: ["Membuat komponen", "Mengelola state", "Membuat API", "Menghapus data"],
                correct: 1
            },
            {
                question: "Method untuk mengubah array menjadi string?",
                options: ["toString()", "toArray()", "stringify()", "convert()"],
                correct: 0
            },
            {
                question: "Apa yang dimaksud dengan callback function?",
                options: ["Function yang dipanggil otomatis", "Function yang dikirim sebagai argument", "Function yang menghapus data", "Function yang membuat loop"],
                correct: 1
            },
            {
                question: "Apa kepanjangan dari CRUD?",
                options: ["Create Read Update Delete", "Copy Read Update Delete", "Create Remove Update Download", "Copy Remove Upload Delete"],
                correct: 0
            },
            {
                question: "Apa fungsi dari media query di CSS?",
                options: ["Membuat animasi", "Membuat responsive design", "Menghapus elemen", "Membuat database"],
                correct: 1
            },
            {
                question: "Version control system yang paling populer?",
                options: ["SVN", "Git", "Mercurial", "CVS"],
                correct: 1
            },
            {
                question: "Tanggal/bulan/tahun/jam/detik keberapa Samu lahir?",
                options: ["15/08/2000/14/30", "20/05/1999/08/45", "10/12/2001/16/20", "25/03/2002/10/15", "05/07/1998/12/00"],
                correct: -1,
                isInput: true
            }
        ];

        const prizes = [
            { name: "Base SC Fluxo", chance: 15 },
            { name: "SC Thunder", chance: 15 },
            { name: "SC MD Tele", chance: 15 },
            { name: "PT Panel", chance: 15 },
            { name: "Panel Unli", chance: 10 },
            { name: "Reseller Panel", chance: 10 },
            { name: "Up Jabatan 1 Langkah 5k", chance: 30 }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedQuestions = [];
        let cooldownInterval;

        function checkCooldown() {
            const gameState = JSON.parse(localStorage.getItem('quizGameState') || '{}');
            const now = Date.now();
            
            if (gameState.cooldownUntil && now < gameState.cooldownUntil) {
                showCooldown(gameState.cooldownUntil);
                return false;
            } else if (gameState.cooldownUntil && now >= gameState.cooldownUntil) {
                gameState.attempts = 3;
                gameState.cooldownUntil = null;
                localStorage.setItem('quizGameState', JSON.stringify(gameState));
            }
            
            return true;
        }

        function updateAttempts() {
            const gameState = JSON.parse(localStorage.getItem('quizGameState') || '{"attempts": 3}');
            document.getElementById('attemptsLeft').textContent = gameState.attempts || 3;
        }

        function decreaseAttempts() {
            const gameState = JSON.parse(localStorage.getItem('quizGameState') || '{"attempts": 3}');
            gameState.attempts = (gameState.attempts || 3) - 1;
            
            if (gameState.attempts <= 0) {
                gameState.attempts = 0;
                gameState.cooldownUntil = Date.now() + (2 * 60 * 60 * 1000); // 2 jam
                localStorage.setItem('quizGameState', JSON.stringify(gameState));
                showCooldown(gameState.cooldownUntil);
                return false;
            }
            
            localStorage.setItem('quizGameState', JSON.stringify(gameState));
            updateAttempts();
            return true;
        }

        function showCooldown(cooldownUntil) {
            document.getElementById('gameContent').classList.add('hidden');
            document.getElementById('cooldownContainer').classList.remove('hidden');
            
            if (cooldownInterval) clearInterval(cooldownInterval);
            
            cooldownInterval = setInterval(() => {
                const now = Date.now();
                const remaining = cooldownUntil - now;
                
                if (remaining <= 0) {
                    clearInterval(cooldownInterval);
                    location.reload();
                    return;
                }
                
                const hours = Math.floor(remaining / (1000 * 60 * 60));
                const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
                
                document.getElementById('cooldownTimer').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function getRandomQuestions() {
            const normalQuestions = allQuestions.slice(0, -1);
            const lastQuestion = allQuestions[allQuestions.length - 1];
            
            const shuffled = normalQuestions.sort(() => Math.random() - 0.5);
            const selected = shuffled.slice(0, 9);
            selected.push(lastQuestion);
            
            return selected;
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / selectedQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function displayQuestion() {
            const question = selectedQuestions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Soal ${currentQuestion + 1} dari ${selectedQuestions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            if (question.isInput) {
                optionsContainer.innerHTML = `
                    <div class="input-container">
                        <input type="text" class="date-input" id="dateInput" placeholder="Format: DD/MM/YYYY/HH/MM">
                        <button class="submit-btn" onclick="checkAnswer(-1)">Submit Jawaban</button>
                    </div>
                `;
            } else {
                question.options.forEach((option, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = option;
                    btn.onclick = () => checkAnswer(index);
                    optionsContainer.appendChild(btn);
                });
            }

            updateProgress();
        }

        function checkAnswer(selectedIndex) {
            const question = selectedQuestions[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => btn.style.pointerEvents = 'none');

            if (selectedIndex === question.correct) {
                if (buttons[selectedIndex]) {
                    buttons[selectedIndex].classList.add('correct');
                }
                score++;
            } else {
                if (buttons[selectedIndex]) {
                    buttons[selectedIndex].classList.add('wrong');
                }
                if (question.correct >= 0 && buttons[question.correct]) {
                    buttons[question.correct].classList.add('correct');
                }
            }

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < selectedQuestions.length) {
                    displayQuestion();
                } else {
                    showResult();
                }
            }, 1500);
        }

        function getRandomPrize() {
            const random = Math.random() * 100;
            let cumulative = 0;
            
            for (let prize of prizes) {
                cumulative += prize.chance;
                if (random <= cumulative) {
                    return prize.name;
                }
            }
            return prizes[prizes.length - 1].name;
        }

        function showResult() {
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('resultContainer').classList.remove('hidden');
            
            const percentage = (score / selectedQuestions.length) * 100;
            document.getElementById('finalScore').textContent = `${score}/${selectedQuestions.length}`;
            
            let message = '';
            if (percentage === 100) {
                message = 'üèÜ Perfect! Kamu luar biasa!';
            } else if (percentage >= 70) {
                message = 'üéØ Bagus sekali! Terus tingkatkan!';
            } else if (percentage >= 50) {
                message = 'üëç Lumayan! Belajar lagi ya!';
            } else {
                message = 'üí™ Jangan menyerah! Coba lagi!';
            }
            
            document.getElementById('scoreMessage').textContent = message;
            
            const prize = getRandomPrize();
            document.getElementById('prizeDisplay').textContent = prize;
            
            const canPlayAgain = decreaseAttempts();
            const restartBtn = document.getElementById('restartBtn');
            if (!canPlayAgain) {
                restartBtn.disabled = true;
                restartBtn.textContent = 'Cooldown Aktif';
            }
        }

        function restartQuiz() {
            if (!checkCooldown()) return;
            
            currentQuestion = 0;
            score = 0;
            selectedQuestions = getRandomQuestions();
            
            document.getElementById('quizContainer').classList.remove('hidden');
            document.getElementById('resultContainer').classList.add('hidden');
            displayQuestion();
        }

        function initGame() {
            if (!checkCooldown()) return;
            
            updateAttempts();
            selectedQuestions = getRandomQuestions();
            displayQuestion();
        }

        initGame();
    </script>
</body>
</html>
